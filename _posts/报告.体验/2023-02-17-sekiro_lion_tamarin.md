---
layout: post
title: 拆包看狮子猿动作设计
categories: [游戏分析]
---

近期通过拆包工具浏览了只狼的狮子猿的一阶段动画，这里进行一个记录和总结，用于后续设计参考。

本文会将全部动画资产按照功能分类一一进行内容叙述、感受分析，力求读完本文对动作游戏PVE怪物设计有一个全面且成体系的认识，日后能设计出只狼级别、甚至超越只狼级别的Boss。

# 《只狼》狮子猿动作设计分析

## 分布总览

故事的起因是想参考狮子猿的动作，但是发现竟然没有办法从录像中精准地提炼出待机动作，一些标志性的技能和部分位移动作是可以看出来的，但是始终还是觉得差了很多、不成体系，逼不得已，直接拆包用工具看看这只怪所有的动作资产。

对只狼的拆包和分析分析过程可以参考下图，感兴趣的同学可以查看[只狼解包介绍](https://www.bilibili.com/video/BV1rf4y1h7QZ)。

![](/assets/img/gameplay/sekiro_lion_tamarion/1.jpg)

考虑到逆向工程总是有损的，以及作者精力有限，部分猜想内容没有进行严格验证，本文还是希望将重点放在**对动画的分析给设计带来的启发**上。

> 本文也没有结合只狼AI的反编译进行更进一步的分析说明，拆包后的AI配置可以反编译得到LUA的描述，配合动作在一起看，应该也能看出很多东西，不过狮子猿不是人形敌人，可能没有打断拼刀的逻辑，总之，本文还是聚焦在攻击动作的设计上。

在对内容初步地分析综合后，得到了下面这个供参考的状态机，从状态机上我们也可以得到一些初步的结论

![](/assets/img/gameplay/sekiro_lion_tamarion/2.jpg)

### 动作资产多到奢侈

狮子猿一阶段TTK大概3-4分钟，总动作资产要超过80个。如果只考虑攻击动作的话，大概`210秒/30种招式`=7秒一个新招式。奢侈！

作为数据对比的话（以下数据可能有较大错误，不对正确性负责），怪猎MHRSB的爵银龙对于普通玩家大约TTK是12分钟，参考[爵银龙的常见招式派生解析](https://www.bilibili.com/video/BV1JF411c7f7)，爵银龙有4个状态每个状态大概7种攻击，每个状态3分半的话，可能是30秒一个新招式。

就招式招式复读的情况来说，两者都会出现。怪猎本身TTK就长，连状态本身都能复读。两者本身动作玩法不同。

> 下一节就会告诉你，对于狮子猿（和爵银龙），甚至不能仅仅考虑攻击招式。

### “占比过半”的演出动作

图上：绿色表示**非攻击动作的基础动作**——这里管叫做“演出”动作，黄色和红色表示攻击动作，其中黄色代表“花样动作”——**不太容易记住**的“花里胡哨”的攻击动作，而红色则代表能**给人留下深刻印象**的“标志性”动作，图上不包含一些周边动作——后文甚至也有一小节单独讲这部分。

从颜色的分布上，我们可以初步看出各中动作之间的比例：

<img style="min-height:300px; object-fit:cover" src="https://mermaid.ink/svg/pako:eNqrVkrOT0lVslIqyExVKMksyUlVeLZ-ypN93U872l629sbkKQBBjNKzPVOetu962rXiyd45MUoKVgpGBjCpF10bny3YjlXq2YL2p_unI0kZGijpKOWmFuUmZqYA7awGKYxRKslIzU2NUbICMlNS0xJLc0pilGLyaoFKE0tL8oMr85KVrEqKSlN1lEoLUhJLUl0yE9OLEnOVrNISc4pTawGytE4v" >

<!-- https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNqrVkrOT0lVslIqyExVKMksyUlVeLZ-ypN93U872l629sbkKQBBjNKzPVOetu962rXiyd45MUoKVgpGBjCpF10bny3YjlXq2YL2p_unI0kZGijpKOWmFuUmZqYA7awGKYxRKslIzU2NUbICMlNS0xJLc0pilGLyaoFKE0tL8oMr85KVrEqKSlN1lEoLUhJLUl0yE9OLEnOVrNISc4pTawGytE4v -->

其中非攻击性动作的**演出动作竟然占比来到了40%**，考虑到攻击动作中势必也会有个性体现的演出，四舍五入玩家的感受中已经过半了！非常夸张！（奢侈！X2）

> 当然，玩家的感受，是动作受到AI控制后播放、玩家与之交互的结果，和直接的动作比例是有差别的。这也是为什么会将攻击动作划分为：容易记住的、不容易记住的两部分来展开叙述。

### “深度深、派生广”的招式

图上连线代表着动画的Pose衔接，为了方便查看，这里给三大出招派生路线添加了背景色，这些招式派生十分复杂，**攻击深度可以轻松突破5**，怪不得打狮子猿时，能感受到“连绵不绝的攻击”带来的强烈压迫感。

更为可怕的是，看过动画以后会发现，动画中有意**通过关键Pose来做衔接**，可以回复idle，也可以衔接下一个攻击，派生可能性非常多。

## “演出”动作

本节我们来讨论**非攻击动作的基础动作**，虽然叫演出动作，却不是登场演出，死亡演出之类的演出动作，这个命名方式希望关注这些动作：虽然作为基础动作，却含有大量个性演出的信息。

### 5个“待机”

本文的初衷就是能力有限找不到狮子猿的待机Pose，拆包的动画第一个看到就是待机，一个猿类的待机，身体与地面平行，很标准的idle，也很适合用做各种攻击的起手

看到以后感觉没啥，就这？虽然很合理但是为战斗中看不出来呢？

看到第二个动画就理解了一丝丝：第二个动画是一个从idle回到idle的演出动作，动作内容是轻微拍下地。截止到看完全部的动画，类似功能的演出待机共有4个。它们可能会被**用在各种动作的衔接中来增强个性表现**，比如先拍下地再释放某种攻击动作，又或者大吼一下再放个狠招。（得益于这是一个霸体Boss，用演出动作来衔接玩家也无法打断，对连段并不造成影响。）

也就是说，狮子猿**很少停在最朴素的这个idle**，有调节攻击频率的空白期的需要，就用演出动作或者个性化位移。（奢侈！X3）

> 类似增强个性表现的目的，格斗游戏也有一种做法：让角色有多个idle，比如没拔武器、拔出武器，没开特殊状态、开了特殊状态。
> 
> ……但是也一般不会离谱到根本看不出停在idle


### 走、跑、跳、转向

其他基础动画像基础待机一样，存在感被压制到了最低，几乎只会播放一次，不会持续停留，淹没在了诸多演出性质更强的移动动作中。

+ 3个跑与2个后跳

本以为idle你能藏，你基础的走跑跳我总能看得明白吧？看完以后发现还是天真了，走跑跳都玩出花。

+ 转向动作：只狼标准的是【转90度、转180度两种】X【左右转两种】共计四个动画

既然选择了给转向动画，也就意味着怪物其实没有一直朝向玩家，一定程度上避免了转向滑步问题，对于玩家躲避招式也更加公平（虽然攻击动作中该自动转向跟踪玩家改跟还是会跟）

+ 4方向走：前、左、右三个动画

这应该是和基础待机一样最朴素的基础动作。

没有后方向可能只是狮子猿用不上，看ID占位其实是留了一个空位的。

+ 4方向跳跃：基础的跳跃，与个性化后跳

跳跃的基本上是前后对称、左右对称。动作也比较基础和常规。

值得一提的是向后跳跃，有一个非常有个性的旋转后跳。

在攻击动作里面，也有一个带攻击框体的拍地后跳，也让跳跃很难重复播放。

+ 跑：2个前跑与1个后跑

普通的跳跃前跑，基础且常规。

演出性质的有：一个侧看以后前冲，还有一个转身以后向后跑

## 花样动作

攻击行为的中流砥柱，普普通通填充了玩家的面对的大部分攻击题目，潜移默化地影响着玩家的战斗感受，花样动作的数量和质量决定了一个Boss是否“踏实”，具有足够的深度——让玩家越重玩越能发现新东西。

这里记录一些看到动画表现以后有启发的部分。

### 帧数分布：Pose的停顿

早期设计动作，大家一般会分为【前摇，攻击，后摇】3部分来描述动作的三个阶段。格斗游戏的帧数表中会叫：发生Startup 持续Active 恢复Recovery

狮子猿的攻击动画当然也满足这个规律，但是看动作比较多以后，发现它在关键帧停顿这件事上做得更为刻意和夸张，停顿时长能达到0.16秒到0.33秒（5-10帧，30帧/秒），3个阶段被扩充到了5个【起手，攻击前Pose，攻击，后摇Pose，后摇】。

甚至在“相同性质”的攻击上，经常给出不同的攻击前Pose和后摇Pose，以此来丰富体验。

### 用作衔接：后摇Pose

上文有提到过用关键的Pose来衔接攻击，具体的做法就是利用后摇Pose。

即可以衔接idle，也可以衔接一轮新的攻击。

> 比如转身打，转身回复idle；失衡前撞；扔屎等

### 优秀设计：带位移的攻击

看了很多动作以后，假设把攻击分为九个区域，无外乎就是不同区域来回打。

除了尝试添加个性化的成分外，尝试给攻击带上位移也能也是一个思考的方向。

## 特色动作

### 主打一个物理或精神的杀伤力

不然就是动作本身过目难忘，不然就是性能夸张。

### 如何控制结合比例

一般挑战越大，收益越大，而且学会解法以后基本就是稳定白给期。

## 周边动作

### 僵直动作与僵直派生

僵直动作一定程度上决定了玩法的丰富度。

### 登场动作与处决动作

动作不重要，重要的是状态。

### 通用动作

有一个下落动作，暂时不明白是干嘛的。

## 总结

有钱真好。

一些设计思路。

